<ion-header>
  <ion-toolbar color="primary">

    <ion-buttons slot="start">
      <ion-back-button defaultHref="/home-asesor"></ion-back-button>
    </ion-buttons>

    <ion-title>Contrataciones Pendientes</ion-title>

  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">

  <ion-spinner *ngIf="loading"></ion-spinner>

  <ion-card *ngFor="let c of contrataciones">

    <ion-card-header>
      <ion-card-title>
        ğŸ“± {{ c.planes_moviles?.nombre_comercial || 'Plan desconocido' }}
      </ion-card-title>

      <ion-badge color="warning">
        {{ c.estado?.toUpperCase() }}
      </ion-badge>
    </ion-card-header>

    <ion-card-content>

      <p><b>ğŸ‘¤ Cliente:</b> {{ c.perfiles?.nombre_completo || 'Sin nombre' }}</p>
      <p><b>ğŸ“§ Email:</b> {{ c.perfiles?.email || 'Sin email' }}</p>

      <p><b>ğŸ’µ Precio:</b> ${{ c.planes_moviles?.precio }}</p>
      <p><b>ğŸ“… Fecha:</b> {{ c.created_at | date:'short' }}</p>

      <p *ngIf="c.numero_linea"><b>ğŸ“ NÃºmero lÃ­nea:</b> {{ c.numero_linea }}</p>
      <p *ngIf="c.direccion_entrega"><b>ğŸ“¦ DirecciÃ³n:</b> {{ c.direccion_entrega }}</p>

    </ion-card-content>

    <ion-item>
      <ion-button color="success" slot="start"
        (click)="cambiarEstado(c, 'aprobada')">
        âœ” Aprobar
      </ion-button>

      <ion-button color="danger" slot="end"
        (click)="cambiarEstado(c, 'rechazada')">
        âœ– Rechazar
      </ion-button>
    </ion-item>

  </ion-card>

  <ion-text *ngIf="!loading && contrataciones.length === 0">
    <p class="ion-text-center">âš  No hay contrataciones pendientes</p>
  </ion-text>

</ion-content>
